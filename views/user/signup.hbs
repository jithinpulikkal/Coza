<link rel="stylesheet" href="/stylesheets/login.css" />

<div>
    <div class="limiter">
        <div class="container-login100">
            <div class="wrap-signup100">
                <div class="signup100-pic js-tilt" data-tilt>
                    <img src="/images/img-01.png" alt="IMG" />
                </div>

                <form
                    name="signup"
                    onsubmit="return userSignUp()"
                    action="/signup"
                    method="post"
                    class="login100-form validate-form"
                >
                    <span class="signup100-form-title">
                        Signup
                    </span>

                    <!-- Name Field -->
                    <div class="wrap-input100 validate-input" data-validate="Name is required">
                        <input
                            class="input100"
                            type="text"
                            name="username"
                            placeholder="Name"
                            required
                            autocomplete="off"
                        />
                        <span class="focus-input100"></span>
                        <span class="symbol-input100">
                            <i class="fa fa-user" aria-hidden="true"></i>
                        </span>
                    </div>

                    <!-- Email Field -->
                    <div class="wrap-input100 validate-input" data-validate="Valid email is required">
                        <input
                            class="input100"
                            type="email"
                            name="email"
                            placeholder="Email"
                            required
                            autocomplete="off"
                        />
                        <span class="focus-input100"></span>
                        <span class="symbol-input100">
                            <i class="fa fa-envelope" aria-hidden="true"></i>
                        </span>
                    </div>

                    <!-- Phone Field -->
                    <div class="wrap-input100 validate-input" data-validate="Valid number is required">
                        <input
                            class="input100"
                            type="number"
                            name="phone"
                            placeholder="Phone"
                            required
                            autocomplete="off"
                        />
                        <span class="focus-input100"></span>
                        <span class="symbol-input100">
                            <i class="fa fa-phone" aria-hidden="true"></i>
                        </span>
                    </div>

                    <!-- Gender Field -->
                    <div class="wrap-input100 validate-input" data-validate="Gender is required">
                        <select name="gender" class="input100" style="border:none" required>
                            <option value="">Select Gender</option>
                            <option value="Male">Male</option>
                            <option value="Female">Female</option>
                        </select>
                    </div>

                    <!-- Password Field -->
                    <div class="wrap-input100 validate-input" data-validate="Password is required">
                        <input
                            class="input100"
                            type="password"
                            name="password"
                            placeholder="Password"
                            id="password"
                            required
                        />
                        <span class="focus-input100"></span>
                        <span class="symbol-input100">
                            <i class="fa fa-lock" aria-hidden="true"></i>
                        </span>
                    </div>

                    <!-- Confirm Password Field -->
                    <div class="wrap-input100 validate-input" data-validate="Password is required">
                        <input
                            class="input100"
                            type="password"
                            name="repassword"
                            placeholder="Confirm Password"
                            id="repassword"
                            required
                        />
                        <span class="focus-input100"></span>
                        <span class="symbol-input100">
                            <i class="fa fa-lock" aria-hidden="true"></i>
                        </span>
                    </div>

                    <!-- Error Message -->
                    <p class="text-danger" id="signupErr">{{Err}}</p>

                    <!-- Submit Button -->
                    <button class="container-login100-form-btn">
                        <input
                            type="submit"
                            value="Sign Up"
                            class="login100-form-btn"
                            placeholder="Password"
                        />
                    </button>

                    <!-- Login Link -->
                    <div class="signin text-center pt-2">
                        <span>Already have an account? <br> <a href="/login">Log In here</a></span><br />
                        <a href="/" class="mb-2 text-center">Home</a>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<script>
    function userSignUp() {
        const password = document.querySelector('input[name="password"]').value;
        const repassword = document.querySelector('input[name="repassword"]').value;
        const phone = document.querySelector('input[name="phone"]').value;
        const email = document.querySelector('input[name="email"]').value;
        const gender = document.querySelector('select[name="gender"]').value;
        const signupErr = document.getElementById("signupErr");

        // Clear previous error
        signupErr.textContent = "";

        // Validate password match
        if (password !== repassword) {
            signupErr.textContent = "Passwords do not match.";
            return false;
        }

        // Validate phone number length
        if (phone.length !== 10) {
            signupErr.textContent = "Phone number must be 10 digits.";
            return false;
        }

        // Validate gender selection
        if (gender === "") {
            signupErr.textContent = "Please select a gender.";
            return false;
        }

        // Validate email format
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(email)) {
            signupErr.textContent = "Invalid email format.";
            return false;
        }

        // If all validations pass, allow form submission
        return true;
    }
</script>